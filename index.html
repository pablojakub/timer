<!DOCTYPE html>
<html lang="pl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deep Work Timer</title>
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Outfit:wght@300;600;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="stage">
        <div class="container">
            <div class="drag-region"></div>

            <header class="header">
                <span class="title">Deep Work</span>
                <div class="window-controls">
                    <button class="window-btn streak-badge" id="streakBadge" title="Dni z rzƒôdu">
                        <span class="streak-icon">üî•</span>
                        <span class="streak-count" id="streakCount">0</span>
                    </button>
                    <button class="window-btn" id="settingsBtn" title="Ustawienia">‚öôÔ∏è</button>
                    <button class="window-btn" id="maximizeBtn" title="Powiƒôksz/Zmniejsz">‚ñ¢</button>
                    <button class="window-btn" id="minimizeBtn" title="Minimalizuj">‚àí</button>
                    <button class="close-btn" id="closeBtn" title="Zamknij">‚úï</button>
                </div>
            </header>

            <div class="goal-section">
                <label class="goal-label" id="goalLabel">Cel sesji</label>
                <input type="text" class="goal-input" id="goalInput" placeholder="Zaimplementowaƒá X w module Y"
                    title="Po czym poznam, ≈ºe cel zosta≈Ç osiƒÖgniƒôty?">
                <h2 class="goal-display" id="goalDisplay" style="display: none;"></h2>
            </div>

            <div class="timer-display">
                <svg class="progress-ring" viewBox="0 0 200 200">
                    <circle class="bg" cx="100" cy="100" r="90" />
                    <circle class="progress" id="progressCircle" cx="100" cy="100" r="90" />
                </svg>

                <!-- Plant Growth Display -->
                <div class="plant-container" id="plantContainer">
                    <svg class="plant-svg" id="plantSvg" viewBox="0 0 100 100">
                        <!-- Stage 1: Seed (0-20%) -->
                        <g class="plant-stage" id="plantStage1">
                            <ellipse cx="50" cy="85" rx="8" ry="4" fill="#8B4513" />
                            <ellipse cx="50" cy="82" rx="5" ry="6" fill="#654321" />
                        </g>
                        <!-- Stage 2: Sprout (20-40%) -->
                        <g class="plant-stage" id="plantStage2" style="opacity: 0;">
                            <ellipse cx="50" cy="88" rx="12" ry="5" fill="#8B4513" />
                            <path d="M50 85 Q50 70 50 60" stroke="#228B22" stroke-width="3" fill="none"
                                stroke-linecap="round" />
                            <ellipse cx="47" cy="58" rx="6" ry="4" fill="#32CD32" transform="rotate(-30 47 58)" />
                            <ellipse cx="53" cy="58" rx="6" ry="4" fill="#32CD32" transform="rotate(30 53 58)" />
                        </g>
                        <!-- Stage 3: Small Plant (40-60%) -->
                        <g class="plant-stage" id="plantStage3" style="opacity: 0;">
                            <ellipse cx="50" cy="90" rx="15" ry="6" fill="#8B4513" />
                            <path d="M50 88 Q50 65 50 45" stroke="#228B22" stroke-width="4" fill="none"
                                stroke-linecap="round" />
                            <ellipse cx="42" cy="70" rx="10" ry="5" fill="#32CD32" transform="rotate(-45 42 70)" />
                            <ellipse cx="58" cy="70" rx="10" ry="5" fill="#32CD32" transform="rotate(45 58 70)" />
                            <ellipse cx="40" cy="55" rx="12" ry="6" fill="#2ECC71" transform="rotate(-40 40 55)" />
                            <ellipse cx="60" cy="55" rx="12" ry="6" fill="#2ECC71" transform="rotate(40 60 55)" />
                            <ellipse cx="45" cy="43" rx="8" ry="4" fill="#32CD32" transform="rotate(-25 45 43)" />
                            <ellipse cx="55" cy="43" rx="8" ry="4" fill="#32CD32" transform="rotate(25 55 43)" />
                        </g>
                        <!-- Stage 4: Plant with Bud (60-80%) -->
                        <g class="plant-stage" id="plantStage4" style="opacity: 0;">
                            <ellipse cx="50" cy="92" rx="18" ry="7" fill="#8B4513" />
                            <path d="M50 90 Q50 60 50 30" stroke="#228B22" stroke-width="5" fill="none"
                                stroke-linecap="round" />
                            <ellipse cx="38" cy="75" rx="12" ry="6" fill="#32CD32" transform="rotate(-50 38 75)" />
                            <ellipse cx="62" cy="75" rx="12" ry="6" fill="#32CD32" transform="rotate(50 62 75)" />
                            <ellipse cx="35" cy="58" rx="14" ry="7" fill="#2ECC71" transform="rotate(-45 35 58)" />
                            <ellipse cx="65" cy="58" rx="14" ry="7" fill="#2ECC71" transform="rotate(45 65 58)" />
                            <ellipse cx="40" cy="42" rx="10" ry="5" fill="#32CD32" transform="rotate(-30 40 42)" />
                            <ellipse cx="60" cy="42" rx="10" ry="5" fill="#32CD32" transform="rotate(30 60 42)" />
                            <!-- Bud -->
                            <ellipse cx="50" cy="25" rx="8" ry="10" fill="#FF69B4" />
                            <ellipse cx="46" cy="28" rx="4" ry="6" fill="#FF85C1" transform="rotate(-15 46 28)" />
                            <ellipse cx="54" cy="28" rx="4" ry="6" fill="#FF85C1" transform="rotate(15 54 28)" />
                        </g>
                        <!-- Stage 5: Full Flower (80-100%) -->
                        <g class="plant-stage" id="plantStage5" style="opacity: 0;">
                            <ellipse cx="50" cy="93" rx="20" ry="8" fill="#8B4513" />
                            <path d="M50 92 Q50 55 50 25" stroke="#228B22" stroke-width="5" fill="none"
                                stroke-linecap="round" />
                            <ellipse cx="35" cy="78" rx="14" ry="7" fill="#32CD32" transform="rotate(-55 35 78)" />
                            <ellipse cx="65" cy="78" rx="14" ry="7" fill="#32CD32" transform="rotate(55 65 78)" />
                            <ellipse cx="32" cy="60" rx="16" ry="8" fill="#2ECC71" transform="rotate(-50 32 60)" />
                            <ellipse cx="68" cy="60" rx="16" ry="8" fill="#2ECC71" transform="rotate(50 68 60)" />
                            <ellipse cx="38" cy="42" rx="12" ry="6" fill="#32CD32" transform="rotate(-35 38 42)" />
                            <ellipse cx="62" cy="42" rx="12" ry="6" fill="#32CD32" transform="rotate(35 62 42)" />
                            <!-- Full Flower -->
                            <ellipse cx="50" cy="8" rx="10" ry="6" fill="#FF6B9D" />
                            <ellipse cx="38" cy="15" rx="10" ry="6" fill="#FF85B3" transform="rotate(-60 38 15)" />
                            <ellipse cx="62" cy="15" rx="10" ry="6" fill="#FF85B3" transform="rotate(60 62 15)" />
                            <ellipse cx="40" cy="28" rx="9" ry="5" fill="#FF9FC3" transform="rotate(-120 40 28)" />
                            <ellipse cx="60" cy="28" rx="9" ry="5" fill="#FF9FC3" transform="rotate(120 60 28)" />
                            <circle cx="50" cy="18" r="8" fill="#FFD700" />
                            <circle cx="50" cy="18" r="5" fill="#FFA500" />
                        </g>
                    </svg>
                </div>

                <div class="timer-controls" id="timerControls">
                    <div class="arrow-buttons-left">
                        <button class="arrow-btn" id="increaseBy10">‚ñ≤</button>
                        <button class="arrow-btn" id="decreaseBy10">‚ñº</button>
                    </div>
                    <div class="time" id="timerDisplay">50 min</div>
                    <div class="arrow-buttons-right">
                        <button class="arrow-btn" id="increaseBy1">‚ñ≤</button>
                        <button class="arrow-btn" id="decreaseBy1">‚ñº</button>
                    </div>
                </div>
            </div>

            <!-- Music Player Section -->
            <div class="music-section" id="musicSection">
                <button class="music-toggle" id="musicToggle">
                    <span class="toggle-icon-music">üéµ</span>
                    <span class="toggle-text">Focus Music</span>
                    <span class="toggle-icon" id="musicToggleIcon">‚ñº</span>
                </button>

                <div class="music-player-container" id="musicPlayerContainer" style="display: none;">
                    <!-- Track Info Display -->
                    <div class="music-track-info">
                        <div class="track-name" id="trackName">No track selected</div>
                        <div class="track-category" id="trackCategory"></div>
                    </div>

                    <!-- Playback Controls -->
                    <div class="music-controls">
                        <button class="music-btn" id="prevTrackBtn" title="Previous track">‚èÆ</button>
                        <button class="music-btn music-btn-play" id="playPauseBtn" title="Play/Pause">‚ñ∂</button>
                        <button class="music-btn" id="nextTrackBtn" title="Next track">‚è≠</button>
                        <button class="music-btn loop-active" id="loopBtn" title="Loop: ON" data-loop="true">üîÅ</button>
                    </div>

                    <!-- Volume Control -->
                    <div class="volume-control">
                        <span class="volume-icon">üîä</span>
                        <input type="range" class="volume-slider" id="volumeSlider" min="0" max="100" value="50">
                        <span class="volume-value" id="volumeValue">50%</span>
                    </div>

                    <!-- Track List -->
                    <div class="track-list-label">Select Track:</div>
                    <div class="track-list" id="trackList">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>

                <!-- Hidden audio element -->
                <audio id="musicPlayer" preload="none"></audio>
            </div>

            <!-- Achievements Section -->
            <div class="achievements-section" id="achievementsSection">
                <button class="achievements-toggle" id="achievementsToggle">
                    <span class="toggle-text">Dzisiejsze osiƒÖgniƒôcia</span>
                    <span class="toggle-icon" id="toggleIcon">‚ñº</span>
                    <span class="achievements-count" id="achievementsCount">0</span>
                </button>
                <div class="achievements-list-container" id="achievementsContainer" style="display: none;">
                    <ul class="achievements-list" id="achievementsList"></ul>
                </div>
            </div>

            <!-- Streak Panel -->
            <div class="streak-panel" id="streakPanel" style="display: none;">
                <div class="streak-panel-header">
                    <h3>Tw√≥j postƒôp</h3>
                    <button class="streak-panel-close" id="streakPanelClose">‚úï</button>
                </div>
                <div class="streak-panel-content">
                    <div class="streak-stat">
                        <div class="streak-stat-label">Aktualny streak</div>
                        <div class="streak-stat-value" id="currentStreak">0 dni</div>
                    </div>
                    <div class="streak-stat">
                        <div class="streak-stat-label">Najd≈Çu≈ºszy streak</div>
                        <div class="streak-stat-value" id="longestStreak">0 dni</div>
                    </div>
                    <div class="streak-motivation" id="streakMotivation" style="display: none;">
                        <p class="streak-quote">"Nigdy nie rezygnuj dwa razy z rzƒôdu."</p>
                        <p class="streak-author">- James Clear</p>
                    </div>
                </div>
            </div>

            <div class="controls">
                <button class="btn btn-secondary" id="resetBtn">Reset</button>
                <button class="btn btn-primary btn-hold" id="startBtn"
                    title="Kliknij: Start/Pauza | Przytrzymaj: Zako≈Ñcz i zalicz cel">
                    <span class="btn-icon" id="startBtnIcon">‚ñ∂</span>
                    <span class="btn-text" id="startBtnText">Start</span>
                </button>
            </div>

            <!-- Achievement Modal -->
            <div class="modal-overlay" id="achievementModal" style="display: none;">
                <div class="modal-dialog">
                    <div class="modal-header">
                        <h3 class="modal-title">OsiƒÖgniƒôcie celu</h3>
                    </div>
                    <div class="modal-body">
                        <p class="modal-question">Czy osiƒÖgnƒÖ≈Çe≈õ sw√≥j cel?</p>
                        <p class="modal-goal-text" id="modalGoalText"></p>
                    </div>
                    <div class="modal-actions">
                        <button class="btn btn-secondary modal-btn" id="modalNoBtn">Nie</button>
                        <button class="btn btn-primary modal-btn" id="modalYesBtn">Tak</button>
                    </div>
                    <div class="modal-actions-secondary">
                        <button class="btn btn-warning modal-btn-full" id="modalExtendBtn">Potrzebujƒô jeszcze 5
                            minut</button>
                    </div>
                </div>
            </div>

            <!-- Distraction Check Modal -->
            <div class="modal-overlay" id="distractionModal" style="display: none;">
                <div class="modal-dialog">
                    <div class="modal-header">
                        <h3 class="modal-title">Przed startem</h3>
                    </div>
                    <div class="modal-body">
                        <p class="modal-question">Czy zamknƒÖ≈Çe≈õ wszystkie rozpraszacze?</p>
                        <div class="modal-checkbox-wrapper">
                            <input type="checkbox" id="hideDistractionCheck" class="modal-checkbox">
                            <label for="hideDistractionCheck" class="modal-checkbox-label">Nie pokazuj wiƒôcej</label>
                        </div>
                    </div>
                    <div class="modal-actions">
                        <button class="btn btn-secondary modal-btn" id="modalDistractionNoBtn">Nie</button>
                        <button class="btn btn-primary modal-btn" id="modalDistractionYesBtn">Tak</button>
                    </div>
                </div>
            </div>

            <!-- Close Confirmation Modal -->
            <div class="modal-overlay" id="closeConfirmModal" style="display: none;">
                <div class="modal-dialog">
                    <div class="modal-header">
                        <h3 class="modal-title">Zamykanie aplikacji</h3>
                    </div>
                    <div class="modal-body">
                        <p class="modal-question">Czy na pewno chcesz zamknƒÖƒá aplikacjƒô? Obecnie trwajƒÖca sesja zostanie
                            przerwana.</p>
                    </div>
                    <div class="modal-actions">
                        <button class="btn btn-secondary modal-btn" id="closeConfirmNoBtn">Anuluj</button>
                        <button class="btn btn-primary modal-btn" id="closeConfirmYesBtn">Zamknij</button>
                    </div>
                </div>
            </div>

            <!-- Motivational Message Overlay -->
            <div class="motivation-overlay" id="motivationOverlay" style="display: none;">
                <div class="motivation-content">
                    <div class="motivation-icon">üéØ</div>
                    <p class="motivation-text" id="motivationText"></p>
                </div>
            </div>

        </div>
    </div>

    <script src="aiMotivation.js"></script>
    <script src="streakCounter.js"></script>
    <script src="renderer.js"></script>
</body>

</html>